## **Условные выражения в шаблонах**

В Django-шаблонах условные выражения позволяют вам внедрять логику принятия решений непосредственно в HTML-коде, основываясь на значениях переменных или других условиях. Django использует синтаксис, основанный на тегах шаблонов и фильтрах, чтобы обеспечить конструкции для создания условий. Рассмотрим основные элементы синтаксиса и применения условных выражений в Django-шаблонах:

### **Тег `{% if %}`**

```html
{% if условие %}
    <!-- Код, который выполнится, если условие истинно -->
{% else %}
    <!-- Код, который выполнится, если условие ложно -->
{% endif %}

```

Пример:

```html
<!-- Код, проверяет наличе -->
{% if book.available %}
    <p>Книга доступна в библиотеке.</p>
{% else %}
    <p>Книга в данный момент не доступна в библиотеке.</p>
{% endif %}

```

Этот код использует тег `{% if %}` в Django-шаблоне для проверки условия. Давайте разберем, что делает этот код:

- `{% if book.available %}`: Это условие проверяет, есть ли у объекта `book` значение `available` и, если значение этого атрибута истинно (например, `True`), то код внутри этого блока выполнится.
- `{% else %}`: Этот блок кода будет выполнен, если условие в теге `{% if %}` ложно.

Итак, в зависимости от значения атрибута `available` у объекта `book`, будет выведено одно из двух сообщений: о доступности книги в библиотеке или о том, что книга в данный момент недоступна.

### **Логические операторы в условных выражениях**

```html
{% if условие1 and условие2 %}
    <!-- Код, который выполнится, если оба условия истинны -->
{% elif условие3 or условие4 %}
    <!-- Код, который выполнится, если хотя бы одно из условий истинно -->
{% else %}
    <!-- Код, который выполнится, если все условия ложны -->
{% endif %}

```

Условные выражения могут поддерживать `elif` для проверки нескольких условий, а так же в Django-шаблонах можно использовать операторы `or` ****и `and` для объединения нескольких условий. Это предоставляет возможность создавать более сложные условия, основанные на комбинации различных проверок.

Эти конструкции позволяют вам динамически формировать контент в зависимости от различных условий в Django-шаблонах. Условные выражения делают шаблоны более гибкими и адаптивными к различным сценариям использования в веб-приложениях.

Но не стоит злоупотреблять сложными условиями в шаблонах. Логика в них должна быть максимально проста. Иначе поиск ошибок может быть затруднён. Шаблоны должны только выводить информацию для пользователя.

## Циклы в Django шаблонах

В Django-шаблонах циклы предоставляют механизм для итерации по коллекциям данных, таким как списки или словари, и вывода повторяющихся блоков кода для каждого элемента в коллекции. Это позволяет динамически строить контент страницы на основе данных из вашего веб-приложения. 

### **Цикл `{% for %}`**

Цикл `{% for %}` используется для итерации по спискам, кортежам и другим итерируемым объектам. Синтаксис следующий:

```html
{% for элемент in коллекция %}
    <!-- Код, который выполнится для каждого элемента в коллекции -->
{% empty %}
    <!-- Код, который выполнится, если коллекция пуста -->
{% endfor %}

```

Пример:

```html
<ul>
    {% for book in books %}
        <li>{{ book.title }}</li>
    {% empty %}
        <li>Нет доступных книг.</li>
    {% endfor %}
</ul>

```

В этом примере, для каждой книги в списке `books` будет выполнен блок кода внутри цикла, и будет создан элемент списка с названием книги. Если список пуст, будет выполнен блок кода внутри `{% empty %}`, и будет создан элемент списка с текстом "Нет доступных книг."

Циклы в Django-шаблонах предоставляют средства для динамического создания контента на основе данных вашего веб-приложения, делая шаблоны более краткими и гибкими за счёт динамического создания повторяющихся элементов.

## Тег `url`

В Django тег `{% url %}` используется в шаблонах для формирования ссылок на конкретные URL-пути в вашем веб-приложении. Он предоставляет удобный способ создания URL-ссылок, что делает ваш код менее зависимым от конкретных URL-путей. Вместо хардкодинга URL-ов в HTML-коде, вы используете тег `{% url %}`.

### Основы использования тега `{% url %}`:

Синтаксис тега следующий:

```html
{% url 'name_of_url_pattern' %}

```

`'name_of_url_pattern'` — это имя URL-пути, заданное в вашем файле `urls.py` при определении URL-шаблона. Это имя присваивается с помощью атрибута `name` в функции `path()`. 

### Использования тега `{% url %}`с аргументами:

В контексте детального представления книги, предположим, у вас есть URL-путь с именем `'books:book_detail'`, который принимает аргумент `book_id`. Сначала необходимо определить такой URL-путь в файле `urls.py`:

```python
# urls.py

from django.urls import path
from .views import book_detail

app_name = 'book'

urlpatterns = [
    path('book/<int:book_id>/', book_detail, name='book_detail'),
    # Другие URL-пути
]

```

Затем в шаблоне используйте тег `{% url %}` для создания ссылки на это детальное представление, передавая значение `book_id` в качестве аргумента:

```html
<!-- Ваш шаблон -->

<ul>
    {% for book in books %}
        <li><a href={% url 'book_detail' book_id=book.book_id %} >{{ book.title }}</a></li>
    {% empty %}
        <li>Нет доступных книг.</li>
    {% endfor %}
</ul>

```

В этом примере, когда создана ссылка `<a href=...>{{ book.title }}</a>` с использованием тега `{% url 'book_detail' book_id=book.book_id %}`, Django автоматически заменит это выражение на конкретный URL-путь, соответствующий детальному представлению книги с `book_id` равным значению конкретной книги.

Таким образом, использование тега `{% url %}` в шаблонах Django облегчает создание ссылок на различные URL-пути в вашем веб-приложении, а использование аргументов позволяет динамически формировать URL-пути, основываясь на значениях переменных или данных в вашем приложении.