## Роль компонента Template (Шаблон) в Django

В Django существует концепция, известная как MVT — Модель-Представление-Шаблон. Эта архитектурная модель подразумевает разделение ответственностей веб-приложения на три основных компонента:

1. **Модель (Model):** Этот компонент отвечает за взаимодействие с базой данных. Модель определяет структуру данных и правила их обработки.
2. **Представление (View):** Представление обрабатывает запросы пользователя и взаимодействует с моделью для получения необходимых данных. Оно определяет, какие данные отображаются и каким образом.
3. **Шаблон (Template):** Шаблон занимается созданием HTML-страниц на основе данных, предоставленных представлением. Он представляет собой место, где происходит подготовка визуального дизайна веб-приложения.

### Роль шаблонов

**1. Отделение логики.** Шаблоны позволяют четко отделить логику представления от дизайна. Вместо внедрения HTML-кода прямо в код представления, следует использовать шаблоны для структурирования визуальной составляющей.

**2. Переиспользование кода.** Шаблоны позволяют создавать универсальные компоненты, которые могут использоваться повторно. Например, вы можете создать шаблон для отображения списка элементов и использовать его в разных представлениях.

**3. Интеграция данных.** С помощью шаблонов вы можете интегрировать данные, переданные из представления. Это позволяет динамически отображать информацию на странице в зависимости от контекста.

## Лучшие практики по организации шаблонов в Django

Cтруктура проекта играет ключевую роль в поддержании порядка и легкости сопровождения, веб-разработка не исключение. Давайте поговорим о лучших практиках организации шаблонов в Django и создании каталога "templates".

Когда вы начинаете строить свое веб-приложение, важно иметь четкую и понятную структуру. Это облегчит жизнь как вам, так и другим разработчикам, которые могут присоединиться к проекту. Одной из важных составляющих этой структуры являются шаблоны.

Механизмы шаблонов настраиваются с помощью этого параметра `TEMPLATES` в файле `settings.py`. Сгенерированное значение по умолчанию выглядит следующим образом:

```python
TEMPLATES = [
    {
        "BACKEND": "django.template.backends.django.DjangoTemplates",
        "DIRS": [],
        "APP_DIRS":True,
        "OPTIONS": {},
    },
]
```

1. `BACKEND` — указывает на то, какой движок шаблонов Django будет использоваться. В данном случае, используется стандартный Django шаблонный движок **DjangoTemplates**.
2. `DIRS` — это список директорий, где Django будет искать пользовательские шаблоны. В данном случае, список пуст. По умолчанию Django ищет шаблоны в папке с названием `templates` на уровне проекта. 
3. `APP_DIRS` — указывает, следует ли включать директории приложений в поиск шаблонов. Если установлено в `True`, Django будет искать шаблоны внутри директорий приложений.
4. `OPTIONS` — в этом блоке можно задавать различные параметры и настройки для шаблонов.

```
my_project/
├── manage.py
├── ...
├── myapp/
│   ├── templates/  <- Шаблоны конкретного приложения
│   │   └── myapp/
│   │   │   └── template_name.html 
│   ├── ...
└── templates/  <- Общие шаблоны для всего проекта
    ├── index.html
    └── template_name.html   
```

Размещение шаблонов внутри каталога "templates" позволяет изолировать их от других частей проекта и их легче находить и изменять. Шаблоны на уровне всего проекта предназначены для повторного использования вне зависимости какому приложению они могут понадобиться. Размещение шаблонов внутри приложений упрощает процесс сопровождения и добавления нового функционала. Вы сразу видите, к какому приложению относится тот или иной шаблон. 

Может оказаться, что среди названий шаблонов будут повторения. С точки зрения Django ошибки не будет, он возьмёт первый попавшийся ему шаблон с нужным названием. Что избежать этой неопределённости, хорошей практикой является расположение шаблонов внутри приложения во вложенной папке

```
myapp/
├── templates/ 
    └── myapp/  <- Вложенная папка с названием приложения, чтобы избежать дублирования
        └── template_name.html 
```

## Функция render

При создании веб-приложение следует придерживаться чтобы представления (views) были не громоздким и оставались читаемыми. Так шаблоны и представления должны быть разнесены по модели MVT, на помощь приходит функция `render`. Она позволяет связывать представления с шаблонами, делая код более лаконичным.

Функция `render` в Django используется для рендеринга шаблонов и создания HTTP-ответа с этим содержимым. Вот как работает функция `render`:

```python
# views.py

from django.shortcuts import render  # Импорт функции для работы с шаблонами 

def index(request):
		... # Логика представления

		# Рендеринг шаблона index.html с использованием функции render
    return render(request, 'index.html')  # Шаблон ищется в папках, указанных в настройках

```

1. **Принимает запрос (`request`):**
Функция `render` принимает объект запроса Django (`request`), который содержит информацию о запросе пользователя, такую как параметры, метод запроса и другие данные.
2. **Определяет шаблон (`'index.html'`):**
Вторым аргументом передается имя шаблона, который нужно использовать для формирования HTML-страницы. Это имя обычно указывается относительно директории, указанной в настройках проекта, где находятся шаблоны. В данном случае, предполагается, что шаблон называется `index.html`.
3. **Рендерит шаблон:**
Функция `render` использует шаблонизатор Django, формируя HTML-страницу.
4. **Возвращает HTTP-ответ:**
Результатом функции `render` является HTTP-ответ, который содержит сгенерированную HTML-страницу. Этот ответ может быть отправлен клиенту, и тот увидит сформированную страницу на своем устройстве.

Функция `render` позволяет вам связать представление с шаблоном в одной строке кода. Например, если у вас есть статическая страница без динамического содержимого. 

Если бы нужно было получить шаблон `template_name.html`, который находится в приложении `myapp`. То функция `render` выглядела бы следующим образом:

```
myapp/
├── templates/ 
    └── myapp/  <- Вложенная папка с названием приложения, чтобы избежать дублирования
        └── template_name.html 
```

```python
render(request, 'myapp/template_name.html')
```