## Наследование шаблонов

Рассмотрим пример простой главной страницы библиотеки:

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Библиотека</title>
    <!-- Дополнительные теги head, стили и мета-теги могут быть добавлены по необходимости -->
</head>
<body>
    <nav>
        <ul>
            <li><a href="/">Главная</a></li>
            <li><a href="/books/">Книги</a></li>
            <li><a href="/authors/">Авторы</a></li>
            <!-- Дополнительные ссылки на другие разделы библиотеки -->
        </ul>
    </nav>

    <div id="content">
		    <main>
            <h1>Добро пожаловать в библиотеку</h1>
		        <section>
		            <h2>Популярные книги</h2>
		            <!-- Здесь можно добавить блок с популярными книгами -->
		        </section>
		
		        <section>
		            <h2>Новые поступления</h2>
		            <!-- Здесь можно добавить блок с новыми книгами -->
		        </section>
		    </main>
		</div>

    <footer>
        <p>&copy; 2023 Библиотека. Все права защищены.</p>
    </footer>

</body>
</html>

```

Этот шаблон включает основные разделы HTML-страницы, такие как

- тег `nav` — это навигационный блок. Внутри **`<nav>`** создается неупорядоченный список (**`<ul>`**), в котором каждый пункт представляет собой ссылку (**`<a>`**) на различные разделы библиотеки.
- `<div id="content">` — тег `div` с идентификатором `content`, содержит контент главной страницы библиотеки. Внутри этого блока вы можете разместить все элементы, относящиеся к основному контенту страницы.
- тег `footer` — «подвал» сайта. Он может включать себя год и название вашей библиотеки.

В веб-разработке часто бывает так, что некоторые элементы веб-страницы, такие как «шапка», «подвал» или навигационная панель остаются неизменными на протяжении всего веб-проекта, в то время как контент на страницах должен меняться. Django предоставляет мощный механизм для управления этой общей структурой и уникальным содержимым на каждой странице с использованием **наследования шаблонов** с помощью тега `{% extends %}`.

Вот как это работает в Django:

1. **Базовый (родительский) шаблон:**
Создается базовый шаблон, который содержит общие элементы для всех страниц проекта, такие как такие как «шапка», «подвал» и навигационная панель и т.д. Этот шаблон обычно называется, например, `base.html`.
    
    ```html
    <!-- base.html -->
    
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block title %}Библиотека{% endblock %}</title>
    </head>
    <body>
        <nav>
            <ul>
                <li><a href="/">Главная</a></li>
                <li><a href="/books/">Книги</a></li>
                <li><a href="/authors/">Авторы</a></li>
                <!-- Дополнительные ссылки на другие разделы библиотеки -->
            </ul>
        </nav>
    
        <div id="content">
            {% block content %}{% endblock %}
        </div>
    
        <footer>
            <p>&copy; 2023 Библиотека. Все права защищены.</p>
        </footer>
    
    </body>
    </html>
    
    ```
    
    В этом шаблоне есть два основных тега `{% block %}`. Один для заголовка страницы (`{% block title %}`), а другой для контента страницы (`{% block content %}`). Эти теги указывают на то, где будут вставляться уникальные элементы для каждой конкретной страницы.  `title` и `content` это уникальные названия блоков, которые разработчик выбирает сам, чтобы в дальшем при рендеринге сюда подставлялся HTML код. 
    
2. **Шаблоны для конкретных страниц (дочерние шаблоны):**
Затем создаются шаблоны для конкретных страниц, которые расширяют базовый шаблон. Такие шаблоны называют дочерними. Например, для главной страницы `home.html`:
    
    ```html
    <!-- home.html -->
    
    {% extends 'base.html' %}
    
    {% block title %}Главная страница{% endblock %}
    
    {% block content %}
        <h1>Добро пожаловать в библиотеку</h1>
        <section>
            <h2>Популярные книги</h2>
            <!-- Здесь можно добавить блок с популярными книгами -->
        </section>
    
        <section>
            <h2>Новые поступления</h2>
            <!-- Здесь можно добавить блок с новыми книгами -->
        </section>
    {% endblock %}
    
    ```
    
    В этом шаблоне используется `{% extends 'base.html' %}` для указания, что этот шаблон расширяет базовый шаблон. Затем заполняются блоки, определенные в базовом шаблоне, с уникальным контентом для этой страницы.
    

Давайте рассмотрим два блока из примера:

1. **Блок заголовка:**
    
    ```html
    {% block title %}Библиотека{% endblock %}
    ```
    
    В базовом шаблоне `base.html`, этот блок используется для определения заголовка страницы. Он содержит значение по умолчанию "Библиотека". В дочерних шаблонах, таких как `home.html`, это значение может быть переопределено, чтобы задать уникальный заголовок для конкретной страницы.
    
    Пример из `home.html`:
    
    ```html
    {% block title %}Главная страница{% endblock %}
    ```
    
    Здесь значение блока title переопределено и устанавливается в "Главная страница".
    
2. **Блок контента:**
    
    ```html
    {% block content %}{% endblock %}
    ```
    
    В базовом шаблоне `base.html`, этот блок представляет собой контент страницы, который может быть заменен в дочерних шаблонах. Он оставлен пустым в базовом шаблоне, чтобы предоставить место для уникального контента на каждой странице.
    
    Пример из `home.html`:
    
    ```html
    {% block content %}
        <section>
            <h2>Популярные книги</h2>
            <!-- Здесь можно добавить блок с популярными книгами -->
        </section>
    
        <section>
            <h2>Новые поступления</h2>
            <!-- Здесь можно добавить блок с новыми книгами -->
        </section>
    {% endblock %}
    
    ```
    
    Здесь блок content заполняется уникальным контентом для главной страницы.
    

### Почему в одном блоке есть текст, а в другом нет? ****

В блоке title установлено значение по умолчанию "Библиотека", которое будет использоваться, если в дочернем шаблоне этот блок не переопределен. Это полезно, когда у вас есть общий заголовок для большинства страниц.

В блоке content нет значения по умолчанию, поскольку он предназначен для уникального контента на каждой странице. Каждая дочерняя страница сама определяет, что вставлять в этот блок.

### **Что произойдет, если не передать значение блока?**

Если не передать значение блока, то будет использовано значение по умолчанию (если оно установлено в родительском шаблоне). Если в родительском шаблоне значение по умолчанию не установлено, а в дочернем шаблоне блок не переопределен, то содержимое блока будет пустым.

## Включение HTML кода с помощью тега `include`

Веб-проекты часто включают повторяющиеся элементы, такие как HTML-код для представления конкретного элемента (например, книги) или для частей страницы (например, навигационного меню или подвала). Django предоставляет механизм для избегания повторного кода с использованием тега `{% include %}`.

Вот как это работает:

### `{% include %}` для элементов страницы:

Создание отдельного файла для элемента (например, `book.html`):

```html
<!-- book.html -->

<div class="book">  <!-- HTML код, описывающий книгу вынесен в отдельный фай -->
    <h2>{{ book.title }}</h2>
    <p>{{ book.description }}</p>
    <!-- Дополнительные данные книги -->
</div>

```

В этом файле содержится HTML-код для представления книги, и его можно использовать повторно на разных страницах.

Использование `{% include %}` в шаблоне `home.html`

```html
<!-- home.html -->

{% extends 'base.html' %}

{% block content %}
    <section>
        <h2>Популярные книги</h2>
        {% include 'book.html' with book=popular_book_1 %}
        {% include 'book.html' with book=popular_book_2 %}
        <!-- Дополнительные книги -->
    </section>

    <section>
        <h2>Новые поступления</h2>
        {% include 'book.html' with book=new_book_1 %}
        {% include 'book.html' with book=new_book_2 %}
        <!-- Дополнительные книги -->
    </section>
{% endblock %}

```

В этом примере, код для представления книги включается с помощью `{% include 'book.html' with book=... %}`, где `with book=...` передает данные книги в подключаемый файл. Таким образом, мы избегаем повторения одного и того же кода для каждой книги на странице.

### `{% include %}` для декомпозиции базового шаблона:

Создание отдельных файлов для частей страницы (`nav.html`, `footer.html`):

```html
<!-- nav.html -->

<nav>
    <ul>
        <li><a href="/">Главная</a></li>
        <li><a href="/books/">Книги</a></li>
        <li><a href="/authors/">Авторы</a></li>
        <!-- Дополнительные ссылки -->
    </ul>
</nav>

```

```html
<!-- footer.html -->

<footer>
    <p>&copy; 2023 Библиотека. Все права защищены.</p>
</footer>

```

Использование `{% include %}` в базовом шаблоне (`base.html`):

```html
<!-- base.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Библиотека{% endblock %}</title>
</head>
<body>

    {% include 'nav.html' %}  <!-- Код навигационной панели вынесен в отдельный файл -->

    <div id="content">
        {% block content %}{% endblock %}
    </div>

    {% include 'footer.html' %}  <!-- Код подвала вынесен в отдельный файл -->

</body>
</html>

```

Здесь используется `{% include %}` для включения HTML-кода навигации `nav.html` и подвала `footer.html` в базовый шаблон. Таким образом, мы декомпозируем базовый шаблон на более мелкие компоненты для лучшей читаемости и управляемости кода.

Использование `{% include %}` в Django обеспечивает повторное использование кода, что снижает вероятность ошибок и упрощает обслуживание проекта.

Таким образом, использование `{% extends %}` и `{% include %}` в Django позволяют создавать удобную и поддерживаемую структуру шаблонов, где общие элементы размещаются в базовом шаблоне, а уникальный контент для каждой страницы вставляется в соответствующие блоки. Это упрощает обслуживание и расширение веб-проекта.