## Разбиение текста с помощью регулярных выражений

Разбиение текста на фрагменты является важной задачей в обработке текстовых данных. В Python для этой задачи можно использовать модуль `re` и его метод `re.split()`, который позволяет разделить строку на части согласно заданному регулярному выражению. В этой части теории мы рассмотрим, как использовать `re.split()` и как он может помочь при обработке текста.

### Обзор метода `re.split()`

Метод `re.split()` предназначен для разделения строки на фрагменты согласно заданному регулярному выражению. Он позволяет эффективно разбивать текст на блоки, основываясь на шаблонах, заданных регулярным выражением.

Синтаксис метода `re.split()` выглядит следующим образом:

```python
re.split(pattern, string)
```

- `pattern`: Регулярное выражение, по которому будет производиться разбиение текста.
- `string`: Исходная строка, которую нужно разбить.

### Практические примеры использования `re.split()`

Рассмотрим несколько примеров использования метода `re.split()`:

**Пример 1: Разделение текста по запятым:**

Предположим, у вас есть строка, представляющая список значений разделенных запятыми. Вы хотите разбить эту строку на отдельные слова. Между словами может быть несколько пробелов или вообще не быть. 

Можно воспользоваться встроенным методом строк `split`

```python
text = "яблоко,  апельсин,банан, вишня"
result = [word for words_without_space in text.split() for word in words_without_space.split(",") if word]
print(result)
```

Результат:

```
['яблоко', 'апельсин', 'банан', 'вишня']
```

Запись `[word for words_without_space in text.split() for word in words_without_space.split(",") if word]` выглядит не самой очевидной, хотя и выполняет свою задачу. 

- Подробное описание
    
    Эта запись представляет собой генератор списка (list comprehension) в языке программирования Python. Она разбивает текст на слова, разделенные пробелами, а затем для каждого слова выполняет дополнительное разделение с использованием запятых (',') внутри слова. В итоге, создается список слов, которые были разделены каким-либо образом.
    
    Давайте разберем этот код более подробно:
    
    1. `text.split()`: Этот фрагмент кода разбивает исходный текст `text` на слова, используя пробел как разделитель. Результатом будет список слов, где каждый элемент списка - это слово из исходного текста, разделенное пробелами.
    2. `words_without_space.split(",")`: Затем, для каждого слова из первого разбиения (которое находится в переменной `words_without_space`), этот фрагмент кода разбивает это слово на подстроки, используя запятую (',') в качестве разделителя. Если внутри слова нет запятых, оно останется неизменным. Результатом будет список подстрок.
    3. `if word`: Этот фрагмент кода фильтрует результаты, оставляя только непустые слова. Это делается, чтобы исключить пустые строки, которые могут появиться в результате разделения.
    
    Итоговый результат этой операции - это список слов, которые были извлечены из исходного текста, разделенного каким-либо образом с использованием пробелов и запятых.
    

Как можно тоже самое сделать с помощью регулярных выражений

```python
import re

text = "яблоко,  апельсин,банан, вишня"
result = re.split(r",\s*", text)
print(result)
```

Результат:

```
['яблоко', 'апельсин', 'банан', 'вишня']
```

Итак, `**re.split(r",\s*", text)**` разделяет строку **`text`** на подстроки, используя запятые как разделители, и учитывает ноль или более пробельных символов после запятых.

Использование модуля `re` позволяет использовать регулярные выражения в качестве разделителей, на замену встроенному методу строк `split`.

**Пример 2: Разделение текста по пунктуации:**

При анализе текста, часто требуется разделить текст на предложения, используя знаки препинания в качестве разделителей. Метод строк `split` не умеет использовать несколько различных разделителей. Воспользуемся регулярным выражением

```python
import re

text = "Это предложение. А вот ещё одно!"
result = re.split(r"[.!?]\s?", text)
print(result)

```

Результат:

```
['Это предложение', 'А вот ещё одно', '']
```

**`re.split(r"[.!?]\s?", text)`** разделит текст на подстроки, каждая из которых будет представлять собой отдельное предложение, учитывая, что предложения могут завершаться точкой, восклицательным знаком или вопросительным знаком, за которыми может быть или не быть пробел. Пустая строка в самом конце получается потому что, текст оканчивается на знак препинания и после него нет никакого текста.

Метод `re.split` позволяет эффективно разбивать текст на фрагменты, что полезно при обработке текстовых данных в Python.

## Замена текста с помощью регулярных выражений

Одной из мощных функций модуля `re` в Python является замена текста в строках с использованием регулярных выражений. Мы будем рассматривать метод `re.sub` и его возможности по замене текста на основе шаблонов регулярных выражений.

### Использование метода `re.sub`

Метод `re.sub` предназначен для поиска всех вхождений заданного регулярного выражения в строке и их замены на указанный текст. Его синтаксис выглядит следующим образом:

```python
re.sub(pattern, repl, string)

```

- `pattern`: Регулярное выражение, которое нужно найти и заменить.
- `repl`: Текст, на который будет произведена замена.
- `string`: Исходная строка, в которой будет выполнена замена.

**Пример 1: Замена непечатаемых символов.** 

Предположим, у вас есть текст с множеством непечатаемых символов между словами. Вы можете использовать `re.sub` для того чтобы заменить их:

```python
import re

text = "На учебном\t\tкурсе \tпо программированию \t вы изучите\t\tPython \tи\tмножество других технологий."
result = re.sub(r"\s+", " ", text)
print(result)
```

Результат:

```
На учебном курсе по программированию вы изучите Python и множество других технологий.
```

### Работа с функциями внутри `re.sub`

**Пример 2: Замена гиперссылок.** 

Предположим, вы хотите заменить ссылки в текст и сделать их гиперссылками. И тут вы можете использовать `re.sub`. Внутри метода `re.sub`, вы также можете использовать функции для более сложных замен. В этом случае, функция будет вызываться для каждого совпадения, и результат ее выполнения будет использован в качестве замены. Это позволяет выполнять более гибкие и динамические замены в тексте.

```python
import re

def replace_on_hyperlink(matchobj) -> str:
    url = matchobj.group()
    return f'<a href="{url}">{url}</a>'

text = "Посетите сайт https://docs.python.org/3/library/re.html#re.sub для получения детальной информации."
result = re.sub(r"https?://\S+", replace_on_hyperlink, text)  # Вместо текста для замены указывается функция replace_on_hyperlink, которая будет возвращать реузльтат для замены

```

Результат:

```
Посетите сайт <a href="https://docs.python.org/3/library/re.html#re.sub">https://docs.python.org/3/library/re.html#re.sub</a> для получения детальной информации.
```

Этот код выполняет замену URL-ов в тексте на гиперссылки с использованием модуля `re` и функции `re.sub`.

1. Создается функция `replace_on_hyperlink`, которая будет вызываться для каждого совпадения URL-а в тексте. 
2. Функция принимает один аргумент `matchobj`, который представляет собой объект совпадения, содержащий URL. 
3. Внутри функции `replace_on_hyperlink`, URL извлекается из `matchobj` с использованием `matchobj.group()` и сохраняется в переменной `url`. Затем создается строка в формате HTML, в которой URL заменяется на гиперссылку.
4. `re.sub` используется для поиска всех URL-ов в тексте и их замены на результат, возвращаемый функцией `replace_on_hyperlink`. Регулярное выражение `r"https?://\S+"` используется для поиска URL-ов.